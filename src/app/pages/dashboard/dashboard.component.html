<div class="row">
  <div class="col-lg-6">
    <nb-card [nbSpinner]="dData.measures.length == 0" nbSpinnerStatus="success">
      <nb-card-header>Summary</nb-card-header>
      <nb-card-body>
        <div class="progress-info">
          <div class="title">Current level </div>
          <div class="value">{{ dData.currentLevel * 1000 | ngxNumberWithCommas }} litre</div>
          <nb-progress-bar [value]="(dData.currentLevel / this.dData.totalCapacity)*100"></nb-progress-bar>
          <div class="description">
            <bdi>Total capacity {{ this.dData.totalCapacity * 1000 | ngxNumberWithCommas }}</bdi>
          </div>
        </div>
        <div class="progress-info">
          <div class="title">Last measurement:</div>
          <div class="value">{{dData.lastMeasure['timeString']}} Today</div>
          <div class="description">
            <bdi>Monday, May 15, 2019 {{dData.lastMeasure['timeString']}} </bdi>
          </div>
        </div>
        <div class="progress-info">
          <div class="title">Total measurements</div>
          <div class="value">{{ dData.totalMeasurements | ngxNumberWithCommas }}</div>
          <div class="description">
            <bdi>Total measured days: {{dData.totalMeasurements/24/60 | ngxRound}}</bdi>
          </div>
        </div>
      </nb-card-body>
      <nb-card-footer>
        <nb-actions size="medium" fullWidth>
          <nb-action nbTooltip="Total tanks">
            <i class="nb-coffee-maker"></i><span>{{dData.totalTanks}}</span>
          </nb-action>
          <nb-action nbTooltip="Total users">
            <i class="nb-person"></i><span>{{dData.totalUsers}}</span>
          </nb-action>
          <nb-action nbTooltip="Total maintenances">
            <i class="nb-gear"></i><span>{{dData.totalMaintenances}}</span>
          </nb-action>
        </nb-actions>
      </nb-card-footer>
    </nb-card>
  </div>

  <div class="col-lg-6">
    <nb-card [nbSpinner]="!dData.tank1['name']" nbSpinnerStatus="success">
      <nb-card-header class="tools">
        <span>{{dData.tank1['name']}}</span>
        <div>
          <a routerLink="/pages/maintenances/add" class="btn btn-xs btn-success btn-round">More</a>
        </div>
      </nb-card-header>
      <nb-card-body style="min-height: 424px">
        <table class="tank-info" style="margin-top: 30px;">
          <tbody>
            <tr>
              <td class="tank">
                <div class="cylinder">
                  <div class="oil" [ngStyle]="{'height.px': (dData.lastMeasure['T1-L'] / dData.tank1['capacity'])*250 + 50}">{{(dData.lastMeasure['T1-L'] / dData.tank1['capacity'])*100 | ngxRound}}%</div>
                  <div class="water"></div>
                </div>
              </td>
              <td class="info">
                <h4 class="text-primary">Oil:</h4>
                <h5 class="text-hint">Temp level 1:</h5>
                <h5 class="text-hint">Temp level 2:</h5>
                <h5 class="text-hint">Temp level 3:</h5>
                <h5 class="text-hint">Temp level 4:</h5>
                <h5 class="text-hint">Temp level 5:</h5>
                <h5 class="text-hint">Water level:</h5>
                <h5 class="text-hint">Tank size:</h5>
                <h5 class="text-hint">Oil type:</h5>
              </td>
              <td>
                <h4 class="text-primary">{{dData.lastMeasure['T1-L']}}</h4>
                <h5>{{dData.lastMeasure['T1-t1']}}°C</h5>
                <h5>{{dData.lastMeasure['T1-t2']}}°C</h5>
                <h5>{{dData.lastMeasure['T1-t3']}}°C</h5>
                <h5>{{dData.lastMeasure['T1-t4']}}°C</h5>
                <h5>{{dData.lastMeasure['T1-t5']}}°C</h5>
                <h5>{{dData.lastMeasure['T1-W']}}m, ({{getTankLevel(dData.tank1['capacity'], dData.lastMeasure['T1-W'])}}%)</h5>
                <h5>{{dData.tank1['capacity']}} m<sup>3</sup></h5>
                <h5>{{dData.tank1['oilType']}}</h5>
              </td>
            </tr>
          </tbody>
        </table>
      </nb-card-body>
    </nb-card>


  </div>

  <div class="col-lg-6">
      <nb-card [nbSpinner]="!dData.tank2['name']" nbSpinnerStatus="success">
        <nb-card-header class="tools">
          <span>{{dData.tank2['name']}}</span>
          <div>
            <a routerLink="/pages/maintenances/add" class="btn btn-xs btn-success btn-round">More</a>
          </div>
        </nb-card-header>
        <nb-card-body style="min-height: 424px">
          <table class="tank-info" style="margin-top: 30px;">
            <tbody>
              <tr>
                <td class="tank">
                  <div class="cylinder">
                    <div class="oil type2" [ngStyle]="{'height.px': (dData.lastMeasure['T2-L'] / dData.tank2['capacity'])*250 + 50}">{{(dData.lastMeasure['T2-L'] / dData.tank2['capacity'])*100 | ngxRound}}%</div>
                    <div class="water"></div>
                  </div>
                </td>
                <td class="info">
                  <h4 class="text-primary">Oil:</h4>
                  <h5 class="text-hint">Temp level 1:</h5>
                  <h5 class="text-hint">Temp level 2:</h5>
                  <h5 class="text-hint">Temp level 3:</h5>
                  <h5 class="text-hint">Temp level 4:</h5>
                  <h5 class="text-hint">Temp level 5:</h5>
                  <h5 class="text-hint">Water level:</h5>
                  <h5 class="text-hint">Tank size:</h5>
                  <h5 class="text-hint">Oil type:</h5>
                </td>
                <td>
                  <h4 class="text-primary">{{dData.lastMeasure['T2-L']}}</h4>
                  <h5>{{dData.lastMeasure['T2-t1']}}°C</h5>
                  <h5>{{dData.lastMeasure['T2-t2']}}°C</h5>
                  <h5>{{dData.lastMeasure['T2-t3']}}°C</h5>
                  <h5>{{dData.lastMeasure['T2-t4']}}°C</h5>
                  <h5>{{dData.lastMeasure['T2-t5']}}°C</h5>
                  <h5>{{dData.lastMeasure['T2-W']}}m, ({{getTankLevel(dData.tank2['capacity'], dData.lastMeasure['T2-W'])}}%)</h5>
                  <h5>{{dData.tank2['capacity']}} m<sup>3</sup></h5>
                  <h5>{{dData.tank2['oilType']}}</h5>
                </td>
              </tr>
            </tbody>
          </table>
        </nb-card-body>
      </nb-card>


    </div>

    <div class="col-lg-6">
        <nb-card [nbSpinner]="!dData.tank3['name']" nbSpinnerStatus="success">
          <nb-card-header class="tools">
            <span>{{dData.tank3['name']}}</span>
            <div>
              <a routerLink="/pages/maintenances/add" class="btn btn-xs btn-success btn-round">More</a>
            </div>
          </nb-card-header>
          <nb-card-body style="min-height: 424px">
            <table class="tank-info" style="margin-top: 30px;">
              <tbody>
                <tr>
                  <td class="tank">
                    <div class="cylinder">
                      <div class="oil type3" [ngStyle]="{'height.px': (dData.lastMeasure['T3-L'] / dData.tank3['capacity'])*250 + 50}">{{(dData.lastMeasure['T3-L'] / dData.tank3['capacity'])*100 | ngxRound}}%</div>
                      <div class="water"></div>
                    </div>
                  </td>
                  <td class="info">
                    <h4 class="text-primary">Oil:</h4>
                    <h5 class="text-hint">Temp level 1:</h5>
                    <h5 class="text-hint">Temp level 2:</h5>
                    <h5 class="text-hint">Temp level 3:</h5>
                    <h5 class="text-hint">Temp level 4:</h5>
                    <h5 class="text-hint">Temp level 5:</h5>
                    <h5 class="text-hint">Water level:</h5>
                    <h5 class="text-hint">Tank size:</h5>
                    <h5 class="text-hint">Oil type:</h5>
                  </td>
                  <td>
                    <h4 class="text-primary">{{dData.lastMeasure['T3-L']}}</h4>
                    <h5>{{dData.lastMeasure['T3-t1']}}°C</h5>
                    <h5>{{dData.lastMeasure['T3-t2']}}°C</h5>
                    <h5>{{dData.lastMeasure['T3-t3']}}°C</h5>
                    <h5>{{dData.lastMeasure['T3-t4']}}°C</h5>
                    <h5>{{dData.lastMeasure['T3-t5']}}°C</h5>
                    <h5>{{dData.lastMeasure['T3-W']}}m, ({{getTankLevel(dData.tank3['capacity'], dData.lastMeasure['T3-W'])}}%)</h5>
                    <h5>{{dData.tank3['capacity']}} m<sup>3</sup></h5>
                    <h5>{{dData.tank3['oilType']}}</h5>
                  </td>
                </tr>
              </tbody>
            </table>
          </nb-card-body>
        </nb-card>


      </div>

  <div class="col-lg-12">
    <nb-card>
      <nb-card-header>Date visualization</nb-card-header>
      <nb-card-body>
        <div echarts [options]="options" (chartInit)="onChartInit($event)" class="echart"></div>
      </nb-card-body>
    </nb-card>
  </div>


  <div class="col-lg-12">
      <nb-card>
        <nb-card-header>Test data creation</nb-card-header>
        <nb-card-body>
          <div class="row">
              <div class="col-lg-4">
                  <input type="number" [(ngModel)]="formData.t1Level" class="form-control" required>
              </div>
              <div class="col-lg-4">
                  <input type="number" [(ngModel)]="formData.t2Level" class="form-control" required>
                </div>
                <div class="col-lg-4">
                    <input type="number" [(ngModel)]="formData.t3Level" class="form-control" required>
                  </div>
          </div>
          <br>
          <br>
          <button class="btn btn-success" (click)="saveLevels()">Save tank levels</button>

        </nb-card-body>
      </nb-card>
    </div>

</div>
